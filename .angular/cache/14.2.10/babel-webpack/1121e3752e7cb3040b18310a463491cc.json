{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.payintents = exports.apis = exports.payintent_list = exports.payintent_search = exports.payintent_update = exports.payintent_capture = exports.payintent_confirm = exports.payintent_retrieve = exports.payintent_create = void 0;\n\nconst app_component_utils_1 = require(\"./app.component.utils\");\n\nconst accounts_api_1 = require(\"./accounts.api\");\n\nconst sources_api_1 = require(\"./sources.api\");\n\nconst payment_methods_api_1 = require(\"./payment_methods.api\");\n\nconst customers_api_1 = require(\"./customers.api\");\n\nconst refunds_api_1 = require(\"./refunds.api\");\n\nconst banks_api_1 = require(\"./banks.api\");\n\nexports.payintent_create = {\n  title: '🆕 Create Pay Intent',\n  description: 'Creates a PaymentIntent object',\n  links: [{\n    title: '📕 API docs',\n    url: 'https://stripe.com/docs/api/payment_intents'\n  }, {\n    url: 'https://stripe.com/docs/connect/direct-charges#collecting-fees',\n    title: 'collecting fees'\n  }, {\n    url: 'https://stripe.com/docs/api/payment_intents/create#create_payment_intent-off_session',\n    title: 'off_session'\n  }, {\n    url: 'https://stripe.com/docs/payments/payment-intents#future-usage',\n    title: 'setup_future_usage'\n  }],\n  favKeys: [{\n    valueKey: 'result.id'\n  }, {\n    valueKey: 'result.client_secret'\n  }, {\n    type: 'link',\n    valueKey: 'result.next_action.use_stripe_sdk.stripe_js',\n    title: 'secure payment verify link'\n  }],\n  request: {\n    method: 'POST',\n    path: 'payment_intents',\n    headers: {\n      'Stripe-Account': ''\n    },\n    removeHeaderValues: ['']\n  },\n  data: {\n    amount: 999,\n    confirm: 'true',\n    currency: 'usd',\n    setup_future_usage: 'off_session',\n    metadata: app_component_utils_1.sample.metadata,\n    statement_descriptor: 'stripe-angular data',\n    transfer_group: 'TEST_ORDER' // payment_method: 'pm_card_visa',\n    // application_fee_amount: 0, // only usable with transfer\n\n  },\n  examples: [{\n    title: 'Transfer to Stripe Account',\n    data: {\n      amount: 999,\n      currency: 'usd',\n      transfer_data: {\n        amount: 850,\n        destination: '{{CONNECTED_STRIPE_ACCOUNT_ID}}'\n      },\n      metadata: app_component_utils_1.sample.metadata,\n      statement_descriptor: 'stripe-angular with xfer',\n      setup_future_usage: 'off_session'\n    }\n  }, {\n    title: 'application fee',\n    data: {\n      amount: 999,\n      currency: 'usd',\n      application_fee_amount: 100,\n      transfer_data: {\n        // amount: 850, // not allowed to use amount WITH application fee\n        destination: '{{CONNECTED_STRIPE_ACCOUNT_ID}}'\n      },\n      metadata: app_component_utils_1.sample.metadata,\n      statement_descriptor: 'stripe-angular application_fee_amount',\n      setup_future_usage: 'off_session'\n    }\n  }, {\n    title: 'Source ach_debit with transfer',\n    data: {\n      amount: 10000,\n      confirm: \"true\",\n      currency: \"usd\",\n      metadata: {\n        entity_id: \"entity_id_abc_123\",\n        site_abb: \"wal\",\n        env: \"dev\",\n        order_id: \"stripe-angular-testings\"\n      },\n      transfer_group: \"TEST_ORDER\",\n      source: \"\",\n      customer: \"\",\n      transfer_data: {\n        amount: 7000,\n        destination: \"acct_1JkUxsS7GjacJ5J0\"\n      },\n      payment_method_types: [\"ach_debit\"]\n    }\n  }],\n  pastes: [{\n    title: 'success test card',\n    pasteKey: 'data.payment_method',\n    value: 'pm_card_visa'\n  }, {\n    title: 'will be disputed',\n    pasteKey: 'data.payment_method',\n    value: 'pm_card_createDispute'\n  }, {\n    $api: () => sources_api_1.create_source,\n    pasteKey: 'data.source',\n    valueKey: 'result.id'\n  }, {\n    $api: () => accounts_api_1.accounts_retrieve,\n    pasteKey: 'data.transfer_data.destination',\n    valueKey: 'result.id'\n  }, {\n    $api: () => customers_api_1.customer_list_all,\n    valueKey: 'result.data.0.id',\n    pasteKey: 'data.customer',\n    pastes: [{\n      pasteKey: 'data.payment_method',\n      valueKey: 'result.data.0.default_source',\n      valueMatches: [{\n        expression: '^(?!ba_)'\n      }]\n    }, {\n      pasteKey: 'data.source',\n      valueKey: 'result.data.0.default_source',\n      valueMatches: [{\n        expression: '^ba_'\n      }],\n      pastes: [{\n        pasteKey: 'data.payment_method_types',\n        value: ['ach_debit', 'card']\n      }]\n    }]\n  }, {\n    $api: () => customers_api_1.create_customer,\n    valueKey: 'result.id',\n    pasteKey: 'data.customer'\n  }, {\n    $api: () => customers_api_1.customer_get,\n    valueKey: 'data.id',\n    pasteKey: 'data.customer'\n  }, {\n    $api: () => sources_api_1.card,\n    valueKey: 'result.payment_method.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => sources_api_1.card,\n    valueKey: 'result.source.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => sources_api_1.card,\n    valueKey: 'result.token.card.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => payment_methods_api_1.payment_method_get,\n    title: 'pay method GET 1️⃣',\n    valueKey: 'result.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => sources_api_1.source_get,\n    title: 'source GET 1️⃣',\n    valueKey: 'result.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => customers_api_1.customer_get_payment_methods,\n    valueKey: 'result.data.0.id',\n    pasteKey: 'data.payment_method',\n    pastes: [{\n      valueKey: 'result.data.0.customer',\n      pasteKey: 'data.customer'\n    }]\n  }, {\n    $api: () => customers_api_1.customer_get_sources,\n    valueKey: 'result.data.0.customer',\n    pasteKey: 'data.customer',\n    pastes: [{\n      valueKey: 'result.data.0.id',\n      pasteKey: 'data.payment_method',\n      valueMatches: [{\n        expression: '^(?!ba_)'\n      }] // do NOT paste for banks\n\n    }, {\n      valueKey: 'result.data.0.id',\n      pasteKey: 'data.source',\n      valueMatches: [{\n        expression: '^ba_'\n      }] // only paste for banks\n\n    }, {\n      pasteKey: 'data.payment_method_types',\n      value: [\"ach_debit\"],\n      valueMatches: [{\n        expression: 'ba_',\n        valueKey: 'result.data.0.id' // only paste for banks\n\n      }]\n    }]\n  }, {\n    $api: () => customers_api_1.customer_get_source,\n    valueKey: 'result.customer',\n    pasteKey: 'data.customer',\n    pastes: [{\n      valueKey: 'result.id',\n      pasteKey: 'data.payment_method',\n      valueMatches: [{\n        expression: '^(?!ba_)'\n      }] // do NOT paste for banks\n\n    }, {\n      valueKey: 'result.id',\n      pasteKey: 'data.source',\n      valueMatches: [{\n        expression: '^ba_'\n      }] // only paste for banks\n\n    }, {\n      pasteKey: 'data.payment_method_types',\n      value: [\"ach_debit\"],\n      valueMatches: [{\n        expression: 'ba_',\n        valueKey: 'result.id' // only paste for banks\n\n      }]\n    }]\n  }, {\n    $api: () => payment_methods_api_1.payment_method_get,\n    title: 'pay method customer',\n    valueKey: 'result.customer',\n    pasteKey: 'data.customer'\n  }, {\n    title: 'Create pay intent as another account',\n    $api: () => accounts_api_1.accounts_list,\n    valueKey: 'result.data.0.id',\n    pasteKey: 'request.headers.Stripe-Account'\n  }, {\n    $api: () => accounts_api_1.accounts_list,\n    pasteKey: 'data.transfer_data.destination',\n    valueKey: 'result.data.0.id'\n  }, {\n    title: 'accounts GET',\n    $api: () => accounts_api_1.accounts_retrieve,\n    valueKey: 'result.id',\n    pasteKey: 'request.headers.Stripe-Account'\n  }, {\n    $api: () => exports.payintent_retrieve,\n    valueKey: 'result',\n    pasteKey: 'data',\n    removeKeys: ['id', 'object', 'amount_capturable', 'amount_received', 'application', 'canceled_at', 'cancellation_reason', 'charges', 'client_secret', 'created', 'last_payment_error', 'livemode', 'next_action', 'review', 'status'],\n    removeValues: [null]\n  }, {\n    $api: () => customers_api_1.customer_attach_method,\n    valueKey: 'result.id',\n    pasteKey: 'data.payment_method',\n    pastes: [{\n      valueKey: 'result.customer',\n      pasteKey: 'data.customer'\n    }]\n  }, {\n    title: 'ach_credit_transfer',\n    pasteKey: 'data.payment_method_types',\n    value: [\"ach_credit_transfer\"],\n    afterRemoveKeys: ['data.setup_future_usage']\n  }, {\n    title: 'ach_debit',\n    pasteKey: 'data.payment_method_types',\n    value: [\"ach_debit\"],\n    afterRemoveKeys: ['data.setup_future_usage']\n  }, {\n    $api: () => banks_api_1.bank,\n    valueKey: 'result.bank_account.id',\n    pasteKey: 'request.params.bank_token',\n    title: 'bank token',\n    pastes: [{\n      pasteKey: 'data.payment_method_types',\n      value: [\"ach_debit\"]\n    }],\n    removeKeys: ['setup_future_usage']\n  }]\n};\nconst payintent_cancel = {\n  title: '🚫 Cancel Pay Intent',\n  link: 'https://stripe.com/docs/api/payment_intents/cancel',\n  request: {\n    method: 'POST',\n    path: 'payment_intents/:id/cancel'\n  },\n  data: {\n    cancellation_reason: 'requested_by_customer' // duplicate, fraudulent, requested_by_customer, or abandoned\n\n  },\n  pastes: [{\n    $api: () => exports.payintent_create,\n    valueKey: 'result.id',\n    pasteKey: 'request.params.id'\n  }, {\n    $api: () => exports.payintent_retrieve,\n    valueKey: 'result.id',\n    pasteKey: 'request.params.id'\n  }, {\n    $api: () => exports.payintent_list,\n    valueKey: 'result.data.0.id',\n    pasteKey: 'request.params.id'\n  }]\n};\nexports.payintent_retrieve = {\n  title: '1️⃣ Retrieve Pay Intent by id',\n  link: 'https://stripe.com/docs/api/payment_intents/retrieve',\n  request: {\n    method: 'GET',\n    path: 'payment_intents/:id'\n  },\n  pastes: [{\n    $api: () => exports.payintent_create,\n    title: '🆕 Created pay intent',\n    pasteKey: 'request.params.id',\n    valueKey: 'result.id'\n  }, {\n    $api: () => exports.payintent_list,\n    pasteKey: 'request.params.id',\n    valueKey: 'result.data.0.id'\n  }, {\n    $api: () => refunds_api_1.refunds_list,\n    valueKey: 'result.data.0.payment_intent',\n    pasteKey: 'request.params.id'\n  }, {\n    $api: () => refunds_api_1.refunds_retrieve,\n    valueKey: 'result.payment_intent',\n    pasteKey: 'request.params.id'\n  }, {\n    $api: () => exports.payintent_confirm,\n    pasteKey: 'request.params.id',\n    valueKey: 'result.id'\n  }, {\n    $api: () => refunds_api_1.refund_create,\n    valueKey: 'result.payment_intent',\n    pasteKey: 'request.params.id'\n  }]\n};\nexports.payintent_confirm = {\n  title: '👍 Confirm Pay Intent',\n  description: 'If a pay intent requires verification',\n  links: [{\n    title: '3d-secure',\n    url: 'https://stripe.com/docs/payments/3d-secure#confirm-payment-intent'\n  }, {\n    title: '📕 api docs',\n    url: 'https://stripe.com/docs/api/payment_intents/confirm'\n  }],\n  request: {\n    method: 'POST',\n    path: 'payment_intents/:id/confirm'\n  },\n  data: {// 1-27-2022: For client side you don't need these details\n    // client_secret: \"\",\n    // return_url: window.location.href\n  },\n  pastes: [{\n    $api: () => exports.payintent_create,\n    title: '🆕 Created pay intent',\n    pasteKey: 'request.params.id',\n    valueKey: 'result.id'\n  }, {\n    $api: () => exports.payintent_list,\n    pasteKey: 'request.params.id',\n    valueKey: 'result.data.0.id'\n  }, {\n    title: 'xxx',\n    $api: () => exports.payintent_retrieve,\n    pasteKey: 'request.params.id',\n    valueKey: 'result.id',\n    valueMatches: [{\n      expression: 'requires_confirmation',\n      valueKey: 'result.status'\n    }]\n  }]\n};\nexports.payintent_capture = {\n  title: '📥 Capture Pay Intent',\n  link: 'https://stripe.com/docs/api/payment_intents/capture',\n  request: {\n    method: 'POST',\n    path: 'payment_intents/:id/capture'\n  },\n  pastes: [{\n    $api: () => exports.payintent_retrieve,\n    pasteKey: 'request.params.id',\n    valueKey: 'result.id'\n  }, {\n    $api: () => exports.payintent_create,\n    pasteKey: 'request.params.id',\n    valueKey: 'result.id'\n  }, {\n    $api: () => exports.payintent_list,\n    pasteKey: 'request.params.id',\n    valueKey: 'result.data.0.id'\n  }]\n};\nexports.payintent_update = {\n  title: '⬆️ Update Pay Intent by id',\n  link: 'https://stripe.com/docs/api/payment_intents/update',\n  request: {\n    method: 'POST',\n    path: 'payment_intents/:id'\n  },\n  data: {\n    metadata: {\n      order_id: '6735'\n    }\n  },\n  pastes: [{\n    $api: () => exports.payintent_retrieve,\n    title: '1️⃣ Pay intent retrieve by id',\n    pasteKey: 'request.params.id',\n    valueKey: 'result.id'\n  }, {\n    $api: () => exports.payintent_list,\n    title: '🧾 Pay intent list 1️⃣',\n    pasteKey: 'request.params.id',\n    valueKey: 'result.data.0.id'\n  }, {\n    $api: () => exports.payintent_create,\n    title: '🆕 Created pay intent',\n    pasteKey: 'request.params.id',\n    valueKey: 'result.id'\n  }, {\n    $api: () => accounts_api_1.accounts_list,\n    title: 'Accounts list 1️⃣',\n    pasteKey: 'data.transfer_data.destination',\n    valueKey: 'result.data.0.id'\n  }, {\n    $api: () => accounts_api_1.accounts_retrieve,\n    title: 'Accounts retrieve by id',\n    pasteKey: 'data.transfer_data.destination',\n    valueKey: 'result.id'\n  }, {\n    $api: () => customers_api_1.customer_list_all,\n    title: '🧾 customer list 1️⃣',\n    valueKey: 'result.data.0.id',\n    pasteKey: 'data.customer'\n  }, {\n    $api: () => customers_api_1.create_customer,\n    valueKey: 'result.id',\n    pasteKey: 'data.customer'\n  }, {\n    $api: () => customers_api_1.customer_get,\n    valueKey: 'data.id',\n    pasteKey: 'data.customer'\n  }, {\n    $api: () => customers_api_1.customer_get_payment_methods,\n    title: '🧾 💳 Customer GET payment methods',\n    valueKey: 'result.data.0.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => sources_api_1.card,\n    valueKey: 'result.payment_method.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => sources_api_1.card,\n    valueKey: 'result.source.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => sources_api_1.card,\n    valueKey: 'result.token.card.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => payment_methods_api_1.payment_method_get,\n    valueKey: 'result.id',\n    pasteKey: 'data.payment_method'\n  }, {\n    $api: () => payment_methods_api_1.payment_method_get,\n    title: 'pay method customer',\n    valueKey: 'result.customer',\n    pasteKey: 'data.customer'\n  }, {\n    title: 'accounts list 1️⃣',\n    $api: () => accounts_api_1.accounts_list,\n    valueKey: 'result.data.0.id',\n    pasteKey: 'request.headers.Stripe-Account'\n  }, {\n    title: 'accounts GET',\n    $api: () => accounts_api_1.accounts_retrieve,\n    valueKey: 'result.id',\n    pasteKey: 'request.headers.Stripe-Account'\n  }]\n};\nexports.payintent_search = {\n  title: '🔎 search payment intents',\n  link: 'https://stripe.com/docs/api/payment_intents/search',\n  request: {\n    method: 'GET',\n    path: 'payment_intents/search'\n  },\n  pastes: [],\n  data: {\n    limit: 3,\n    query: \"metadata['key']:'value'\"\n  }\n};\nexports.payintent_list = {\n  title: '🧾 List all PaymentIntents',\n  link: 'https://stripe.com/docs/api/payment_intents/retrieve',\n  request: {\n    method: 'GET',\n    path: 'payment_intents'\n  },\n  data: {\n    limit: 3 // \"created[lte]\": Date.now() - 1000 * 60 * 5 // greater than last five minutes\n\n  },\n  pastes: [{\n    $api: () => payment_methods_api_1.payment_method_get,\n    title: 'pay method customer',\n    valueKey: 'result.customer',\n    pasteKey: 'data.customer'\n  }, {\n    $api: () => customers_api_1.create_customer,\n    valueKey: 'result.id',\n    pasteKey: 'data.customer'\n  }, {\n    $api: () => customers_api_1.customer_get,\n    valueKey: 'data.id',\n    pasteKey: 'data.customer'\n  }, {\n    $api: () => customers_api_1.customer_list_all,\n    title: 'Customer list 1️⃣',\n    valueKey: 'result.data.0.id',\n    pasteKey: 'data.customer'\n  }]\n};\nexports.apis = [exports.payintent_create, exports.payintent_retrieve, exports.payintent_search, exports.payintent_list, exports.payintent_update, exports.payintent_confirm, exports.payintent_capture, payintent_cancel];\nexports.payintents = {\n  icon: '🧧',\n  title: 'Pay Intents',\n  apis: exports.apis,\n  description: 'A PaymentIntent guides you through the process of collecting a payment from your customer.',\n  links: [{\n    title: '📕 API docs',\n    url: 'https://stripe.com/docs/api/payment_intents'\n  }, {\n    title: '📦 💵 👤 💰 🛳 multiple charges & transfers',\n    url: 'https://stripe.com/docs/connect/charges-transfers'\n  }]\n};","map":null,"metadata":{},"sourceType":"script"}